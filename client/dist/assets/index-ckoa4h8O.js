var V=Object.defineProperty;var J=(o,y,e)=>y in o?V(o,y,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[y]=e;var j=(o,y,e)=>J(o,typeof y!="symbol"?y+"":y,e);import{r as m,a as q,u as L,b as Z,c as ee,R as te,d as $,e as se,B as ae}from"./react-B4W3H5Ub.js";import{l as W}from"./socketio-qXw27f4H.js";import{p as w}from"./phaser-Chk84G3K.js";(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();var G={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ie=m,re=Symbol.for("react.element"),ne=Symbol.for("react.fragment"),oe=Object.prototype.hasOwnProperty,le=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ce={key:!0,ref:!0,__self:!0,__source:!0};function H(o,y,e){var t,a={},i=null,r=null;e!==void 0&&(i=""+e),y.key!==void 0&&(i=""+y.key),y.ref!==void 0&&(r=y.ref);for(t in y)oe.call(y,t)&&!ce.hasOwnProperty(t)&&(a[t]=y[t]);if(o&&o.defaultProps)for(t in y=o.defaultProps,y)a[t]===void 0&&(a[t]=y[t]);return{$$typeof:re,type:o,key:i,ref:r,props:a,_owner:le.current}}E.Fragment=ne;E.jsx=H;E.jsxs=H;G.exports=E;var s=G.exports,z={},U=q;z.createRoot=U.createRoot,z.hydrateRoot=U.hydrateRoot;const O={dash:{icon:"‚ö°",name:"Dash",description:"Quick dash in any direction"},heal:{icon:"üíö",name:"Heal",description:"Restore health instantly"},shield:{icon:"üõ°Ô∏è",name:"Shield",description:"Temporary damage reduction"},scan:{icon:"üëÅÔ∏è",name:"Scan",description:"Reveal all players and nexuses"}},A="http://localhost:3001",de=()=>{const[o,y]=m.useState(null),[e,t]=m.useState(localStorage.getItem("playerName")||""),[a,i]=m.useState(""),[r,n]=m.useState(null),[u,d]=m.useState(!1),[h,f]=m.useState("disconnected"),[b,g]=m.useState(""),[P,N]=m.useState([]),[D,B]=m.useState(!1),[T,M]=m.useState(null),C=m.useRef(0),I=5,R=L(),l=m.useCallback(async()=>{try{const S=await(await fetch(`${A}/health`)).json();M({rooms:S.rooms,totalPlayers:S.totalPlayers||0})}catch{}},[]);m.useEffect(()=>{f("connecting");const c=W(A,{transports:["websocket","polling"],timeout:1e4,reconnection:!0,reconnectionAttempts:I,reconnectionDelay:1e3,reconnectionDelayMax:5e3});y(c),c.on("connect",()=>{console.log("Connected to server"),f("connected"),g(""),C.current=0,p(),l()}),c.on("joined-room",x=>{n({roomId:x.roomId,players:Object.values(x.gameState.players),gamePhase:x.gameState.gamePhase}),d(!1)}),c.on("room-full",()=>{g("Room is full (max 10 players)"),d(!1)}),c.on("game-event",x=>{x.type==="player-joined"||x.type==="player-left"||x.type==="game-started"&&r&&o&&R(`/game/${r.roomId}`,{state:{socket:o,playerName:localStorage.getItem("playerName")}})}),c.on("game-state-update",x=>{if(r){const X=r.gamePhase==="waiting",K=x.gamePhase!=="waiting";n({...r,players:Object.values(x.players),gamePhase:x.gamePhase}),X&&K&&o&&R(`/game/${r.roomId}`,{state:{socket:o,playerName:localStorage.getItem("playerName")}})}}),c.on("quick-match-found",x=>{d(!1),x.roomId&&c.emit("join-room",{roomId:x.roomId,playerName:localStorage.getItem("playerName")})}),c.on("disconnect",x=>{console.log("Disconnected:",x),f("disconnected"),n(null),d(!1),x==="io server disconnect"&&c.connect()}),c.on("connect_error",x=>{console.error("Connection error:",x),C.current++,f("disconnected"),C.current>=I?g("Unable to connect to server. Please check your connection and try again."):g(`Connecting to server... (attempt ${C.current}/${I})`),d(!1)}),c.on("reconnect",x=>{console.log("Reconnected after",x,"attempts"),f("connected"),g("")});const S=setInterval(()=>{p(),l()},5e3);return()=>{c.close(),clearInterval(S)}},[R,l]);const p=m.useCallback(async()=>{try{const S=await(await fetch(`${A}/rooms`)).json();N(S.rooms||[])}catch{}},[]),v=()=>{if(!e.trim()){g("Please enter your name");return}d(!0),g(""),localStorage.setItem("playerName",e.trim()),o==null||o.emit("join-room",{playerName:e.trim()})},k=c=>{if(!e.trim()){g("Please enter your name");return}const S=c||a.trim().toUpperCase();if(!S){g("Please enter a room ID");return}d(!0),g(""),localStorage.setItem("playerName",e.trim()),o==null||o.emit("join-room",{roomId:S,playerName:e.trim()})},Y=async()=>{if(!e.trim()){g("Please enter your name");return}d(!0),g(""),localStorage.setItem("playerName",e.trim());try{const S=await(await fetch(`${A}/quickjoin`)).json();S.roomId?o==null||o.emit("join-room",{roomId:S.roomId,playerName:e.trim()}):o==null||o.emit("quick-match",{playerName:e.trim()})}catch{if(P.length>0){const S=P.find(x=>x.playerCount<6&&x.canJoin!==!1)||P[0];o==null||o.emit("join-room",{roomId:S.roomId,playerName:e.trim()})}else o==null||o.emit("join-room",{playerName:e.trim()})}},_=()=>{o==null||o.disconnect(),o==null||o.connect(),n(null)},Q=()=>{r&&navigator.clipboard.writeText(r.roomId)};return r?s.jsx("div",{className:"lobby-container",children:s.jsxs("div",{className:"lobby-card",style:{maxWidth:"500px"},children:[s.jsx("h1",{children:"üéÆ Nexus Wars"}),s.jsxs("div",{className:"room-info",children:[s.jsxs("h2",{children:["Room: ",r.roomId]}),s.jsx("button",{className:"btn btn-secondary",onClick:Q,style:{marginBottom:"10px"},children:"üìã Copy Room ID"}),s.jsx("p",{style:{opacity:.7},children:"Share this code with friends!"})]}),s.jsxs("div",{className:"room-info",children:[s.jsxs("h3",{children:["Players (",r.players.length,"/10)"]}),s.jsx("div",{style:{display:"grid",gap:"8px"},children:r.players.map(c=>{const S=O[c.abilityType]||O.dash;return s.jsxs("div",{className:"player-item",style:{display:"flex",alignItems:"center",gap:"10px",background:"rgba(255,255,255,0.1)",padding:"8px 12px",borderRadius:"8px"},children:[s.jsx("div",{className:"player-color",style:{backgroundColor:c.color,width:"24px",height:"24px",borderRadius:"50%"}}),s.jsx("span",{style:{flex:1},children:c.name}),s.jsxs("span",{title:S.description,style:{cursor:"help"},children:[S.icon," ",S.name]})]},c.id)})})]}),s.jsxs("div",{className:"room-info",style:{background:r.players.length>=2?"rgba(39, 174, 96, 0.2)":"rgba(255, 255, 255, 0.1)",padding:"15px",borderRadius:"8px",border:r.players.length>=2?"2px solid #27ae60":"2px solid transparent"},children:[s.jsx("h3",{style:{margin:0},children:r.gamePhase==="waiting"?r.players.length>=2?"‚úÖ Ready to start!":"‚è≥ Waiting for players...":"üéÆ Game in progress"}),r.players.length<2&&s.jsx("p",{style:{margin:"10px 0 0",opacity:.7},children:"Need at least 2 players"})]}),s.jsx("button",{className:"btn",onClick:_,style:{marginTop:"10px"},children:"üö™ Leave Room"})]})}):s.jsx("div",{className:"lobby-container",children:s.jsxs("div",{className:"lobby-card",style:{maxWidth:"600px"},children:[s.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"5px"},children:"üéÆ Nexus Wars"}),s.jsx("p",{style:{opacity:.8,marginBottom:"10px"},children:"Fast-paced 2D multiplayer strategy"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"15px",fontSize:"13px"},children:[s.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:h==="connected"?"#27ae60":h==="connecting"?"#f39c12":"#e74c3c",boxShadow:h==="connected"?"0 0 10px #27ae60":"none"}}),s.jsx("span",{style:{opacity:.7},children:h==="connected"?"Connected":h==="connecting"?"Connecting...":"Disconnected"}),T&&h==="connected"&&s.jsxs("span",{style:{opacity:.5,marginLeft:"10px"},children:["‚Ä¢ ",T.totalPlayers," players online ‚Ä¢ ",T.rooms," rooms"]})]}),b&&s.jsxs("div",{style:{background:b.includes("Connecting")?"rgba(243, 156, 18, 0.2)":"rgba(231, 76, 60, 0.2)",padding:"12px",borderRadius:"8px",marginBottom:"15px",border:`1px solid ${b.includes("Connecting")?"rgba(243, 156, 18, 0.5)":"rgba(231, 76, 60, 0.5)"}`},children:[b.includes("Connecting")?"üîÑ":"‚ö†Ô∏è"," ",b]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:"playerName",children:"Your Name"}),s.jsx("input",{id:"playerName",type:"text",value:e,onChange:c=>t(c.target.value),placeholder:"Enter your player name",maxLength:15,disabled:u,style:{fontSize:"16px",padding:"12px"}})]}),s.jsx("button",{className:"btn",onClick:Y,disabled:u||!e.trim()||h!=="connected",style:{fontSize:"18px",padding:"15px 30px",background:h==="connected"?"linear-gradient(135deg, #27ae60, #2ecc71)":"linear-gradient(135deg, #7f8c8d, #95a5a6)",marginBottom:"10px",width:"100%"},children:u?"üîÑ Finding match...":h!=="connected"?"‚è≥ Connecting...":"‚ö° Quick Match"}),s.jsx("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:s.jsx("button",{className:"btn btn-secondary",onClick:v,disabled:u||!e.trim()||h!=="connected",style:{flex:1},children:u?"üîÑ...":"üÜï Create Room"})}),P.length>0&&s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h4",{style:{marginBottom:"10px"},children:"üåê Active Games"}),s.jsx("div",{style:{display:"grid",gap:"8px"},children:P.slice(0,5).map(c=>{const x={waiting:"#27ae60",spawn:"#3498db",expansion:"#9b59b6",conflict:"#e74c3c",pulse:"#f39c12"}[c.gamePhase||"waiting"]||"#95a5a6";return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,255,255,0.1)",padding:"10px 15px",borderRadius:"8px",borderLeft:`3px solid ${x}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:c.roomId}),c.gamePhase&&s.jsx("span",{style:{fontSize:"11px",padding:"2px 6px",background:`${x}33`,borderRadius:"4px",color:x},children:c.gamePhase==="waiting"?"‚è≥ Waiting":`üéÆ ${c.gamePhase}`})]}),s.jsxs("span",{style:{opacity:.7,fontSize:"14px"},children:[c.playerCount,"/",c.maxPlayers]}),s.jsx("button",{className:"btn btn-secondary",onClick:()=>k(c.roomId),disabled:u||h!=="connected"||c.canJoin===!1,style:{padding:"5px 15px",fontSize:"14px"},children:"Join"})]},c.roomId)})})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"15px 0",opacity:.5},children:[s.jsx("hr",{style:{flex:1,border:"1px solid rgba(255,255,255,0.3)"}}),s.jsx("span",{style:{padding:"0 15px"},children:"OR JOIN BY CODE"}),s.jsx("hr",{style:{flex:1,border:"1px solid rgba(255,255,255,0.3)"}})]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("input",{type:"text",value:a,onChange:c=>i(c.target.value.toUpperCase()),placeholder:"Room code",maxLength:6,disabled:u||h!=="connected",style:{flex:1,fontSize:"16px",padding:"12px",textAlign:"center",letterSpacing:"2px"}}),s.jsx("button",{className:"btn btn-secondary",onClick:()=>k(),disabled:u||!e.trim()||!a.trim()||h!=="connected",children:"Join"})]}),s.jsx("button",{onClick:()=>B(!D),style:{background:"transparent",border:"none",color:"#3498db",cursor:"pointer",marginTop:"20px",fontSize:"14px"},children:D?"‚ñº Hide Tutorial":"‚ñ∂ How to Play"}),D&&s.jsxs("div",{style:{textAlign:"left",marginTop:"15px",padding:"20px",background:"rgba(0,0,0,0.3)",borderRadius:"12px",fontSize:"14px"},children:[s.jsx("h4",{style:{marginBottom:"15px"},children:"üéØ Objective"}),s.jsx("p",{style:{marginBottom:"15px",opacity:.9},children:"Control energy nexuses to gain influence and score. The player with the highest score when time runs out wins!"}),s.jsx("h4",{style:{marginBottom:"10px"},children:"‚å®Ô∏è Controls"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"15px"},children:[s.jsxs("div",{children:[s.jsx("kbd",{children:"WASD"})," Move"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"Click"})," Move/Attack"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"E"})," Harvest nexus"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"Q"})," Boost nexus"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"Space"})," Deploy beacon"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"R"})," Use ability"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"F"})," Attack nearest"]})]}),s.jsx("h4",{style:{marginBottom:"10px"},children:"‚öîÔ∏è Special Abilities"}),s.jsx("div",{style:{display:"grid",gap:"6px"},children:Object.entries(O).map(([c,S])=>s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[s.jsx("span",{children:S.icon}),s.jsxs("span",{style:{fontWeight:"bold"},children:[S.name,":"]}),s.jsx("span",{style:{opacity:.8},children:S.description})]},c))}),s.jsx("h4",{style:{marginTop:"15px",marginBottom:"10px"},children:"üí° Tips"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"20px",opacity:.9},children:[s.jsx("li",{children:"Stay near nexuses to passively capture them"}),s.jsx("li",{children:"Combo attacks for bonus damage and score"}),s.jsx("li",{children:"Collect power-ups for temporary boosts"}),s.jsx("li",{children:"Kill streaks give bonus energy!"})]})]})]})})};class he extends w.Scene{constructor(){super({key:"GameScene"});j(this,"socket");j(this,"currentPlayer");j(this,"gameState");j(this,"playerSprites",new Map);j(this,"nexusSprites",new Map);j(this,"powerUpSprites",new Map);j(this,"influenceGraphics");j(this,"leaderboardText");j(this,"comboText");j(this,"abilityIndicator");j(this,"cursors");j(this,"wasdKeys");j(this,"targetX",0);j(this,"targetY",0);j(this,"isMovingToTarget",!1);j(this,"effectsQueue",[])}preload(){const e=this.add.graphics();e.fillStyle(16777215),e.fillCircle(4,4,4),e.generateTexture("particle",8,8),e.destroy()}create(){this.influenceGraphics=this.add.graphics(),this.cursors=this.input.keyboard.createCursorKeys(),this.wasdKeys=this.input.keyboard.addKeys("W,S,A,D,E,Q,F,R,SPACE"),this.input.on("pointerdown",e=>{this.handleMouseClick(e.x,e.y)}),this.input.keyboard.on("keydown-E",()=>this.handleHarvest()),this.input.keyboard.on("keydown-Q",()=>this.handleBoostNexus()),this.input.keyboard.on("keydown-SPACE",()=>this.handleDeployBeacon()),this.input.keyboard.on("keydown-F",()=>this.handleAttackNearestPlayer()),this.input.keyboard.on("keydown-R",()=>this.handleUseAbility()),this.createUI()}createUI(){this.leaderboardText=this.add.text(10,10,"",{fontSize:"13px",color:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:{x:10,y:8}}).setScrollFactor(0).setDepth(1e3),this.comboText=this.add.text(400,50,"",{fontSize:"24px",color:"#ffff00",fontStyle:"bold",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(1001).setAlpha(0),this.abilityIndicator=this.add.container(700,550);const e=this.add.circle(0,0,30,3355443,.8),t=this.add.text(0,0,"R",{fontSize:"20px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);this.abilityIndicator.add([e,t]),this.abilityIndicator.setScrollFactor(0).setDepth(1e3)}initializeGame(e,t,a){this.socket=e,this.currentPlayer=t,this.gameState=a,this.socket.on("game-state-update",i=>{this.updateGameState(i)}),this.socket.on("game-event",i=>{this.handleGameEvent(i)}),this.renderGameState()}update(e,t){if(!(!this.currentPlayer||!this.gameState))for(this.handleMovement(t),this.updatePlayerPosition(t),this.updateAbilityIndicator();this.effectsQueue.length>0;){const a=this.effectsQueue.shift();a&&a()}}handleMovement(e){var i,r,n,u,d,h,f,b;let t=0,a=0;if((i=this.wasdKeys.A)!=null&&i.isDown||(r=this.cursors.left)!=null&&r.isDown?t=-1:((n=this.wasdKeys.D)!=null&&n.isDown||(u=this.cursors.right)!=null&&u.isDown)&&(t=1),(d=this.wasdKeys.W)!=null&&d.isDown||(h=this.cursors.up)!=null&&h.isDown?a=-1:((f=this.wasdKeys.S)!=null&&f.isDown||(b=this.cursors.down)!=null&&b.isDown)&&(a=1),t!==0||a!==0){this.isMovingToTarget=!1;const g=this.currentPlayer.speed*(e/1e3);t!==0&&a!==0&&(t*=.707,a*=.707);const P=w.Math.Clamp(this.currentPlayer.x+t*g,20,780),N=w.Math.Clamp(this.currentPlayer.y+a*g,20,580);this.sendPlayerAction("move",{x:P,y:N})}}handleMouseClick(e,t){const a=this.getPlayerAtPosition(e,t);if(a&&a.id!==this.currentPlayer.id){this.sendPlayerAction("attack",{targetId:a.id});return}this.targetX=e,this.targetY=t,this.isMovingToTarget=!0,this.createMoveTargetEffect(e,t)}handleHarvest(){const e=this.getNearbyNexus();e&&(this.sendPlayerAction("harvest",{nexusId:e.id}),this.createHarvestEffect(e.x,e.y))}handleBoostNexus(){const e=this.getNearbyNexus();e&&e.controlledBy===this.currentPlayer.id&&(this.sendPlayerAction("boost-nexus",{nexusId:e.id}),this.createBoostEffect(e.x,e.y))}handleDeployBeacon(){this.currentPlayer.energy>=25&&(this.sendPlayerAction("deploy-beacon",{}),this.createBeaconEffect(this.currentPlayer.x,this.currentPlayer.y))}handleAttackNearestPlayer(){const e=Object.values(this.gameState.players);let t=null,a=1/0;for(const i of e){if(i.id===this.currentPlayer.id||!i.isAlive)continue;const r=w.Math.Distance.Between(this.currentPlayer.x,this.currentPlayer.y,i.x,i.y);r<a&&r<=this.currentPlayer.attackRange&&(a=r,t=i.id)}t&&this.sendPlayerAction("attack",{targetId:t})}handleUseAbility(){const e=Date.now();this.currentPlayer.lastAbilityUse+this.currentPlayer.abilityCooldown-e<=0&&this.sendPlayerAction("use-ability",{abilityType:this.currentPlayer.abilityType,x:this.targetX||this.currentPlayer.x,y:this.targetY||this.currentPlayer.y})}updateAbilityIndicator(){if(!this.currentPlayer)return;const e=Date.now(),t=Math.max(0,this.currentPlayer.lastAbilityUse+this.currentPlayer.abilityCooldown-e),a=this.abilityIndicator.list[0],i=this.abilityIndicator.list[1];t>0?(a.fillColor=6710886,i.setText(Math.ceil(t/1e3).toString())):(a.fillColor=this.getAbilityColor(this.currentPlayer.abilityType),i.setText("R"))}getAbilityColor(e){switch(e){case"dash":return 65535;case"heal":return 65280;case"shield":return 255;case"scan":return 16711935;default:return 16777215}}updatePlayerPosition(e){if(this.isMovingToTarget){if(w.Math.Distance.Between(this.currentPlayer.x,this.currentPlayer.y,this.targetX,this.targetY)<5){this.isMovingToTarget=!1;return}const a=w.Math.Angle.Between(this.currentPlayer.x,this.currentPlayer.y,this.targetX,this.targetY),i=this.currentPlayer.speed*(e/1e3),r=this.currentPlayer.x+Math.cos(a)*i,n=this.currentPlayer.y+Math.sin(a)*i;this.sendPlayerAction("move",{x:r,y:n})}}sendPlayerAction(e,t){this.socket.emit("player-action",{type:e,data:t,timestamp:Date.now()})}updateGameState(e){this.gameState=e;const t=Object.values(e.players).find(a=>a.id===this.currentPlayer.id);t&&(this.currentPlayer=t),this.renderGameState()}renderGameState(){this.renderInfluenceMap(),this.renderNexuses(),this.renderPlayers(),this.renderPowerUps(),this.renderLeaderboard()}renderInfluenceMap(){this.influenceGraphics.clear(),Object.values(this.gameState.players).forEach(t=>{if(t.influence>0){const a=Math.min(t.influence*1.5,80),i=w.Display.Color.HexStringToColor(t.color).color;this.influenceGraphics.fillStyle(i,.08),this.influenceGraphics.fillCircle(t.x,t.y,a)}}),this.gameState.nexuses.forEach(t=>{if(t.controlledBy){const a=this.gameState.players[t.controlledBy];if(a){const i=w.Display.Color.HexStringToColor(a.color).color;this.influenceGraphics.lineStyle(2,i,.3),this.influenceGraphics.strokeCircle(t.x,t.y,70)}}})}renderNexuses(){this.gameState.nexuses.forEach(e=>{let t=this.nexusSprites.get(e.id);t||(t=this.createNexusSprite(e),this.nexusSprites.set(e.id,t)),this.updateNexusSprite(t,e)})}createNexusSprite(e){const t=this.add.container(e.x,e.y),a=this.add.circle(0,0,35,3447003,.3),i=this.add.circle(0,0,25,3447003);i.setStrokeStyle(3,2719929);const r=this.add.circle(0,0,10,16777215,.8),n=this.add.rectangle(0,-40,50,8,2899536);n.setStrokeStyle(1,3426654);const u=this.add.rectangle(-25,-40,0,6,2600544);u.setOrigin(0,.5);const d=this.add.rectangle(0,-50,50,4,1710638),h=this.add.rectangle(-25,-50,0,4,15965202);h.setOrigin(0,.5);const f=[];for(let g=0;g<5;g++){const P=this.add.circle(-20+g*10,40,4,9807270);f.push(P)}const b=this.add.text(0,-60,"‚öîÔ∏è",{fontSize:"16px"}).setOrigin(.5).setVisible(!1);return t.add([a,i,r,n,u,d,h,...f,b]),t.setData("glow",a),t.setData("base",i),t.setData("core",r),t.setData("energyFill",u),t.setData("contestFill",h),t.setData("chargeDots",f),t.setData("contestedText",b),t}updateNexusSprite(e,t){var f;const a=e.getData("base"),i=e.getData("glow"),r=e.getData("energyFill"),n=e.getData("contestFill"),u=e.getData("chargeDots"),d=e.getData("contestedText");if(r.width=t.energy/100*48,u.forEach((b,g)=>{b.fillColor=g<t.chargeLevel?15965202:9807270}),t.controlledBy){const b=this.gameState.players[t.controlledBy];if(b){const g=w.Display.Color.HexStringToColor(b.color).color;a.fillColor=g,i.fillColor=g}}else a.fillColor=3447003,i.fillColor=3447003;const h=t.contestProgress[(f=this.currentPlayer)==null?void 0:f.id]||0;n.width=h/100*48,d.setVisible(t.isContested)}renderPlayers(){const e=Object.values(this.gameState.players);e.forEach(t=>{let a=this.playerSprites.get(t.id);a||(a=this.createPlayerSprite(t),this.playerSprites.set(t.id,a)),this.updatePlayerSprite(a,t)}),this.playerSprites.forEach((t,a)=>{e.find(i=>i.id===a)||(t.destroy(),this.playerSprites.delete(a))})}createPlayerSprite(e){const t=this.add.container(e.x,e.y),a=this.add.ellipse(2,3,22,10,0,.3),i=w.Display.Color.HexStringToColor(e.color).color,r=this.add.circle(0,0,12,i);r.setStrokeStyle(2,16777215);const n=this.add.triangle(15,0,0,-5,0,5,8,0,i);n.setAlpha(.8);const u=this.add.rectangle(0,-22,30,5,16711680),d=this.add.rectangle(-15,-22,30,5,65280);d.setOrigin(0,.5);const h=this.add.text(0,-32,e.name,{fontSize:"11px",color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5),f=this.add.text(0,18,"",{fontSize:"10px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5).setVisible(!1),b=this.add.circle(0,0,18,16777215,0);return b.setStrokeStyle(3,16777215,.5),b.setVisible(!1),t.add([a,r,n,u,d,h,f,b]),t.setData("body",r),t.setData("direction",n),t.setData("healthFill",d),t.setData("nameText",h),t.setData("killStreakBadge",f),t.setData("invincibleRing",b),t}updatePlayerSprite(e,t){var f;e.x=w.Math.Linear(e.x,t.x,.3),e.y=w.Math.Linear(e.y,t.y,.3);const i=e.getData("healthFill"),r=e.getData("killStreakBadge"),n=e.getData("invincibleRing"),u=e.getData("body"),d=t.health/t.maxHealth;i.width=30*d,i.fillColor=d>.5?65280:d>.25?16776960:16711680,t.killStreak>=3?(r.setText(`üî•${t.killStreak}`),r.setVisible(!0)):r.setVisible(!1);const h=Date.now()<t.invincibleUntil;n.setVisible(h),h&&(n.alpha=.5+Math.sin(Date.now()/100)*.3),t.id===((f=this.currentPlayer)==null?void 0:f.id)?(u.setStrokeStyle(3,16777215),e.setScale(1.1)):(u.setStrokeStyle(2,16777215),e.setScale(1)),e.setAlpha(t.isAlive?1:.3)}renderPowerUps(){this.gameState.powerUps&&(this.gameState.powerUps.forEach(e=>{if(e.collected)return;let t=this.powerUpSprites.get(e.id);t||(t=this.createPowerUpSprite(e),this.powerUpSprites.set(e.id,t))}),this.powerUpSprites.forEach((e,t)=>{var i;const a=(i=this.gameState.powerUps)==null?void 0:i.find(r=>r.id===t);(!a||a.collected)&&(e.destroy(),this.powerUpSprites.delete(t))}))}createPowerUpSprite(e){const t=this.add.container(e.x,e.y),a=this.getPowerUpColor(e.type),i=this.add.circle(0,0,18,a,.3),r=this.add.circle(0,0,12,a);r.setStrokeStyle(2,16777215);const n=this.add.text(0,0,this.getPowerUpIcon(e.type),{fontSize:"14px"}).setOrigin(.5);return t.add([i,r,n]),this.tweens.add({targets:t,scaleX:1.15,scaleY:1.15,duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:t,y:e.y-5,duration:1200,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t}getPowerUpColor(e){switch(e){case"speed":return 65535;case"shield":return 3447003;case"damage":return 16729156;case"health":return 65280;case"energy":return 15844367;default:return 16777215}}getPowerUpIcon(e){switch(e){case"speed":return"‚ö°";case"shield":return"üõ°Ô∏è";case"damage":return"‚öîÔ∏è";case"health":return"‚ù§Ô∏è";case"energy":return"‚ú®";default:return"?"}}getNearbyNexus(){return this.gameState.nexuses.find(e=>w.Math.Distance.Between(this.currentPlayer.x,this.currentPlayer.y,e.x,e.y)<60)||null}getPlayerAtPosition(e,t){return Object.values(this.gameState.players).find(a=>w.Math.Distance.Between(a.x,a.y,e,t)<25&&a.isAlive)||null}handleGameEvent(e){switch(e.type){case"nexus-captured":this.effectsQueue.push(()=>this.createCaptureEffect(e.data.nexusId)),this.showNotification(`${e.data.playerName} captured a nexus!`,16766720);break;case"energy-pulse":this.effectsQueue.push(()=>this.createPulseEffect());break;case"player-attacked":this.effectsQueue.push(()=>this.handlePlayerAttackedEvent(e.data));break;case"player-killed":this.effectsQueue.push(()=>this.handlePlayerKilledEvent(e.data));break;case"player-respawned":this.effectsQueue.push(()=>this.createRespawnEffect(e.data.x,e.data.y));break;case"powerup-collected":this.effectsQueue.push(()=>this.handlePowerUpCollectedEvent(e.data));break;case"beacon-deployed":this.effectsQueue.push(()=>this.createBeaconEffect(e.data.x,e.data.y));break;case"ability-used":this.effectsQueue.push(()=>this.handleAbilityUsedEvent(e.data));break;case"achievement-unlocked":this.showAchievement(e.data.achievement);break}}handlePlayerAttackedEvent(e){var i;const t=this.gameState.players[e.attackerId],a=this.gameState.players[e.targetId];if(t&&a){this.createAttackEffect(t.x,t.y,a.x,a.y);const r=this.add.text(a.x,a.y-20,`-${e.damage}`,{fontSize:"18px",color:"#ff4444",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5);this.tweens.add({targets:r,y:a.y-50,alpha:0,scale:1.3,duration:800,ease:"Power2",onComplete:()=>r.destroy()}),e.attackerId===((i=this.currentPlayer)==null?void 0:i.id)&&e.comboCount>1&&this.showCombo(e.comboCount)}}handlePlayerKilledEvent(e){const t=this.gameState.players[e.victimId];if(t){this.createDeathEffect(t.x,t.y);const a=this.add.text(400,100,`üíÄ ${e.killerName} eliminated ${e.victimName}!`,{fontSize:"16px",color:"#ff4444",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:{x:15,y:8}}).setOrigin(.5).setDepth(2e3);this.tweens.add({targets:a,y:80,alpha:0,duration:2500,ease:"Power2",onComplete:()=>a.destroy()}),e.killStreak>=3&&this.showAchievement(`${e.killerName}: ${e.killStreak} Kill Streak! üî•`)}}handlePowerUpCollectedEvent(e){var a;const t=this.gameState.players[e.playerId];if(t){const i=this.getPowerUpColor(e.powerUpType);this.createCollectionEffect(t.x,t.y,i),e.playerId===((a=this.currentPlayer)==null?void 0:a.id)&&this.showNotification(`+${e.powerUpType.toUpperCase()}!`,i)}}handleAbilityUsedEvent(e){switch(e.ability){case"dash":this.createDashEffect(e.x,e.y);break;case"heal":const t=this.gameState.players[e.playerId];t&&this.createHealEffect(t.x,t.y);break;case"shield":const a=this.gameState.players[e.playerId];a&&this.createShieldEffect(a.x,a.y);break;case"scan":this.createScanEffect();break}}createMoveTargetEffect(e,t){const a=this.add.circle(e,t,10,16777215,0);a.setStrokeStyle(2,16777215,.8),this.tweens.add({targets:a,scaleX:2,scaleY:2,alpha:0,duration:400,onComplete:()=>a.destroy()})}createHarvestEffect(e,t){for(let a=0;a<8;a++){const i=a/8*Math.PI*2,r=this.add.circle(e,t,4,2600544);this.tweens.add({targets:r,x:e+Math.cos(i)*40,y:t+Math.sin(i)*40,alpha:0,scale:0,duration:500,ease:"Power2",onComplete:()=>r.destroy()})}}createAttackEffect(e,t,a,i){const r=this.add.line(0,0,e,t,a,i,16729156,1);r.setLineWidth(4),this.tweens.add({targets:r,alpha:0,duration:150,onComplete:()=>r.destroy()});const n=this.add.circle(a,i,5,16729156);this.tweens.add({targets:n,scaleX:3,scaleY:3,alpha:0,duration:200,onComplete:()=>n.destroy()})}createBeaconEffect(e,t){const a=this.add.circle(e,t,8,15965202,.8),i=this.add.circle(e,t,8,15965202,0);i.setStrokeStyle(3,15965202,.8);const r=this.add.circle(e,t,8,15965202,0);r.setStrokeStyle(2,15965202,.5),this.tweens.add({targets:i,scaleX:8,scaleY:8,alpha:0,duration:1500,onComplete:()=>i.destroy()}),this.tweens.add({targets:r,scaleX:8,scaleY:8,alpha:0,duration:1500,delay:200,onComplete:()=>r.destroy()}),this.tweens.add({targets:a,alpha:0,duration:2e3,onComplete:()=>a.destroy()})}createBoostEffect(e,t){for(let a=0;a<12;a++){const i=a/12*Math.PI*2,r=this.add.circle(e+Math.cos(i)*20,t+Math.sin(i)*20,3,15965202);this.tweens.add({targets:r,x:e,y:t,alpha:0,scale:2,duration:400,ease:"Power2",onComplete:()=>r.destroy()})}}createCaptureEffect(e){const t=this.gameState.nexuses.find(i=>i.id===e);if(!t)return;for(let i=0;i<16;i++){const r=i/16*Math.PI*2,n=this.add.circle(t.x,t.y,5,16766720);this.tweens.add({targets:n,x:t.x+Math.cos(r)*60,y:t.y+Math.sin(r)*60,alpha:0,scale:0,duration:600,ease:"Power2",onComplete:()=>n.destroy()})}const a=this.add.circle(t.x,t.y,30,16766720,.8);this.tweens.add({targets:a,scaleX:2,scaleY:2,alpha:0,duration:400,onComplete:()=>a.destroy()})}createPulseEffect(){this.gameState.nexuses.forEach(e=>{if(e.controlledBy){const t=this.gameState.players[e.controlledBy],a=t?w.Display.Color.HexStringToColor(t.color).color:16766720;for(let i=0;i<3;i++){const r=this.add.circle(e.x,e.y,30,a,0);r.setStrokeStyle(4,a,.8),this.tweens.add({targets:r,scaleX:4,scaleY:4,alpha:0,duration:1500,delay:i*300,ease:"Power2",onComplete:()=>r.destroy()})}}})}createDeathEffect(e,t){for(let a=0;a<20;a++){const i=Math.random()*Math.PI*2,r=30+Math.random()*50,n=this.add.circle(e,t,3+Math.random()*3,16711680);this.tweens.add({targets:n,x:e+Math.cos(i)*r,y:t+Math.sin(i)*r,alpha:0,scale:0,duration:400+Math.random()*200,ease:"Power2",onComplete:()=>n.destroy()})}}createRespawnEffect(e,t){const a=this.add.circle(e,t,50,65280,0);a.setStrokeStyle(4,65280,.8),this.tweens.add({targets:a,scaleX:.2,scaleY:.2,alpha:0,duration:500,ease:"Power2",onComplete:()=>a.destroy()})}createCollectionEffect(e,t,a){for(let i=0;i<8;i++){const r=i/8*Math.PI*2,n=this.add.circle(e+Math.cos(r)*30,t+Math.sin(r)*30,4,a);this.tweens.add({targets:n,x:e,y:t-20,alpha:0,duration:400,ease:"Power2",onComplete:()=>n.destroy()})}}createDashEffect(e,t){const a=this.add.circle(e,t,15,65535,.5);this.tweens.add({targets:a,alpha:0,scaleX:2,scaleY:2,duration:300,onComplete:()=>a.destroy()})}createHealEffect(e,t){const a=this.add.rectangle(e,t,6,24,65280),i=this.add.rectangle(e,t,24,6,65280);this.tweens.add({targets:[a,i],y:t-30,alpha:0,duration:800,ease:"Power2",onComplete:()=>{a.destroy(),i.destroy()}})}createShieldEffect(e,t){const a=this.add.circle(e,t,20,3447003,0);a.setStrokeStyle(4,3447003,.8),this.tweens.add({targets:a,scaleX:1.5,scaleY:1.5,duration:500,yoyo:!0,repeat:2,onComplete:()=>a.destroy()})}createScanEffect(){const e=this.add.circle(this.currentPlayer.x,this.currentPlayer.y,10,16711935,0);e.setStrokeStyle(2,16711935,.8),this.tweens.add({targets:e,scaleX:50,scaleY:50,alpha:0,duration:1500,ease:"Power2",onComplete:()=>e.destroy()})}showCombo(e){this.comboText.setText(`${e}x COMBO!`),this.comboText.setAlpha(1),this.comboText.setScale(.5),this.tweens.add({targets:this.comboText,scale:1.2,duration:200,yoyo:!0,onComplete:()=>{this.tweens.add({targets:this.comboText,alpha:0,delay:800,duration:300})}})}showNotification(e,t){const a=this.add.text(400,150,e,{fontSize:"18px",color:"#"+t.toString(16).padStart(6,"0"),fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(2e3);this.tweens.add({targets:a,y:120,alpha:0,duration:1500,ease:"Power2",onComplete:()=>a.destroy()})}showAchievement(e){const t=this.add.text(400,200,`üèÜ ${e}`,{fontSize:"20px",color:"#ffd700",fontStyle:"bold",stroke:"#000000",strokeThickness:4,backgroundColor:"rgba(0, 0, 0, 0.7)",padding:{x:15,y:10}}).setOrigin(.5).setDepth(2001).setScale(0);this.tweens.add({targets:t,scale:1,duration:300,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:t,y:180,alpha:0,delay:2e3,duration:500,onComplete:()=>t.destroy()})}})}renderLeaderboard(){if(!this.gameState.leaderboard)return;let e=`üèÜ LEADERBOARD
`;this.gameState.leaderboard.slice(0,5).forEach((t,a)=>{var d;const r=t.playerId===((d=this.currentPlayer)==null?void 0:d.id)?"‚ñ∫ ":"  ",n=a===0?"ü•á":a===1?"ü•à":a===2?"ü•â":`${a+1}.`,u=t.killStreak>=3?` üî•${t.killStreak}`:"";e+=`${r}${n} ${t.playerName}: ${t.score}${u}
`}),this.leaderboardText.setText(e)}}const F={dash:{icon:"‚ö°",name:"Dash"},heal:{icon:"üíö",name:"Heal"},shield:{icon:"üõ°Ô∏è",name:"Shield"},scan:{icon:"üëÅÔ∏è",name:"Scan"}},pe=()=>{const{roomId:o}=Z(),y=L(),e=ee(),t=m.useRef(null),a=m.useRef(null),[i,r]=m.useState(null),[n,u]=m.useState(null),[d,h]=m.useState(null),[f,b]=m.useState(0),[g,P]=m.useState(!1);m.useEffect(()=>{var v;if(!o){y("/");return}const l=(v=e.state)==null?void 0:v.socket,p=l||W("http://localhost:3001");return a.current=p,l?p.emit("get-game-state"):p.on("connect",()=>{const k=localStorage.getItem("playerName")||"Player";p.emit("join-room",{roomId:o,playerName:k})}),p.on("joined-room",k=>{r(k.gameState),u(k.player)}),p.on("game-state-update",k=>{r(k),n&&k.players[n.id]&&u(k.players[n.id])}),p.on("game-event",k=>{k.type==="game-ended"&&h(k.data)}),p.on("room-full",()=>{alert("Room is full!"),y("/")}),()=>{l||p.close()}},[o,y]),m.useEffect(()=>{if(i&&n&&!t.current){const l={type:w.AUTO,width:800,height:600,parent:"game-container",backgroundColor:"#1a1a2e",scene:he,physics:{default:"arcade",arcade:{gravity:{y:0,x:0},debug:!1}}};t.current=new w.Game(l),t.current.events.once("ready",()=>{var v;const p=(v=t.current)==null?void 0:v.scene.getScene("GameScene");p&&a.current&&p.initializeGame(a.current,n,i)})}return()=>{t.current&&(t.current.destroy(!0),t.current=null)}},[i,n]),m.useEffect(()=>{if(!i||i.gamePhase==="waiting"||i.gamePhase==="ended")return;const l=setInterval(()=>{const p=Date.now()-i.phaseStartTime;let v=0;switch(i.gamePhase){case"spawn":v=1e4;break;case"expansion":v=35e3;break;case"conflict":v=3e4;break;case"pulse":v=15e3;break}b(Math.max(0,v-p))},100);return()=>clearInterval(l)},[i]);const N=()=>{y("/")},D=()=>{var l;(l=a.current)==null||l.emit("restart-game"),h(null)},B=l=>`${Math.ceil(l/1e3)}s`,T=l=>{const p=Math.floor(l/6e4),v=Math.floor(l%6e4/1e3);return`${p}:${v.toString().padStart(2,"0")}`},M=l=>{switch(l){case"spawn":return{text:"Spawn Phase",desc:"Scout the battlefield!",color:"#3498db"};case"expansion":return{text:"Expansion Phase",desc:"Claim nexuses!",color:"#27ae60"};case"conflict":return{text:"Conflict Phase",desc:"Battle for control!",color:"#e74c3c"};case"pulse":return{text:"Pulse Phase",desc:"Final energy burst!",color:"#f39c12"};case"ended":return{text:"Game Over",desc:"",color:"#9b59b6"};default:return{text:"Waiting...",desc:"for players",color:"#95a5a6"}}};if(!i||!n)return s.jsx("div",{className:"lobby-container",children:s.jsxs("div",{className:"lobby-card",children:[s.jsx("h2",{children:"üîÑ Connecting to game..."}),s.jsxs("p",{children:["Room: ",o]})]})});const C=M(i.gamePhase),I=F[n.abilityType]||F.dash,R=Math.max(0,n.lastAbilityUse+n.abilityCooldown-Date.now());return s.jsxs("div",{className:"game-container",children:[s.jsx("div",{id:"game-container",className:"game-canvas"}),s.jsxs("div",{className:"ui-overlay",children:[s.jsxs("div",{className:"hud",style:{background:"rgba(0, 0, 0, 0.8)",borderRadius:"12px",padding:"15px",minWidth:"180px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[s.jsx("div",{style:{width:"30px",height:"30px",backgroundColor:n.color,borderRadius:"50%",border:"2px solid white"}}),s.jsxs("div",{children:[s.jsx("h3",{style:{margin:0,fontSize:"16px"},children:n.name}),s.jsxs("span",{style:{fontSize:"12px",opacity:.7},children:[I.icon," ",I.name]})]})]}),s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"2px"},children:[s.jsx("span",{children:"‚ù§Ô∏è Health"}),s.jsxs("span",{children:[n.health,"/",n.maxHealth]})]}),s.jsx("div",{style:{background:"#333",borderRadius:"4px",height:"8px",overflow:"hidden"},children:s.jsx("div",{style:{background:n.health>50?"#27ae60":n.health>25?"#f39c12":"#e74c3c",height:"100%",width:`${n.health/n.maxHealth*100}%`,transition:"width 0.3s"}})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"14px"},children:[s.jsxs("div",{children:["‚ö° ",n.energy]}),s.jsxs("div",{children:["üéØ ",n.influence]}),s.jsxs("div",{children:["üíÄ ",n.kills]}),s.jsxs("div",{children:["‚ò†Ô∏è ",n.deaths]})]}),s.jsxs("div",{style:{marginTop:"10px",fontSize:"16px",fontWeight:"bold"},children:["Score: ",n.score]}),n.killStreak>=3&&s.jsxs("div",{style:{marginTop:"8px",background:"rgba(231, 76, 60, 0.3)",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",textAlign:"center"},children:["üî• ",n.killStreak," Kill Streak!"]})]}),s.jsxs("div",{className:"phase-indicator",style:{background:"rgba(0, 0, 0, 0.8)",borderRadius:"12px",padding:"15px 25px",textAlign:"center",borderBottom:`3px solid ${C.color}`},children:[s.jsx("h3",{style:{margin:0,color:C.color},children:C.text}),s.jsx("div",{style:{opacity:.8,fontSize:"14px"},children:C.desc}),f>0&&s.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",marginTop:"5px",fontFamily:"monospace"},children:B(f)})]}),s.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(0, 0, 0, 0.8)",borderRadius:"8px",padding:"10px",maxWidth:"150px"},children:[s.jsxs("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"5px"},children:["Players (",Object.keys(i.players).length,")"]}),Object.values(i.players).sort((l,p)=>p.score-l.score).slice(0,5).map((l,p)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",padding:"3px 0",opacity:l.isAlive?1:.5},children:[s.jsx("span",{children:p===0?"ü•á":p===1?"ü•à":p===2?"ü•â":""}),s.jsx("div",{style:{width:"10px",height:"10px",backgroundColor:l.color,borderRadius:"50%"}}),s.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",fontWeight:l.id===n.id?"bold":"normal"},children:l.name}),s.jsx("span",{style:{opacity:.7},children:l.score})]},l.id))]}),s.jsxs("div",{style:{position:"absolute",bottom:"10px",right:"10px",background:"rgba(0, 0, 0, 0.8)",padding:"12px",borderRadius:"8px",fontSize:"11px"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 15px"},children:[s.jsxs("div",{children:[s.jsx("kbd",{children:"WASD"})," Move"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"E"})," Harvest"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"Space"})," Beacon"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"Q"})," Boost"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"Click"})," Attack"]}),s.jsxs("div",{children:[s.jsx("kbd",{children:"R"})," ",I.icon," Ability"]})]}),R>0&&s.jsxs("div",{style:{marginTop:"8px",opacity:.7},children:["Ability: ",Math.ceil(R/1e3),"s"]})]})]}),d&&s.jsx("div",{className:"game-over-modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},children:s.jsxs("div",{style:{background:"linear-gradient(135deg, #1a1a2e, #16213e)",padding:"30px 40px",borderRadius:"16px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",border:"2px solid #3498db"},children:[s.jsx("h2",{style:{textAlign:"center",marginBottom:"5px"},children:"üéÆ Game Over!"}),s.jsxs("p",{style:{textAlign:"center",opacity:.7,marginBottom:"20px"},children:["Duration: ",T(d.matchDuration)]}),d.winner?s.jsxs("div",{style:{textAlign:"center",marginBottom:"25px"},children:[s.jsx("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"üèÜ"}),s.jsxs("h3",{style:{color:d.winner.id===n.id?"#f1c40f":"#fff",fontSize:"24px",margin:0},children:[d.winner.name," Wins!"]}),d.winner.id===n.id&&s.jsx("p",{style:{color:"#27ae60",marginTop:"5px"},children:"üéâ Congratulations!"})]}):s.jsx("h3",{style:{textAlign:"center"},children:"Draw!"}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",background:"rgba(255,255,255,0.1)",borderRadius:"8px 8px 0 0",fontSize:"12px",fontWeight:"bold",opacity:.7},children:[s.jsx("span",{style:{width:"30px"},children:"#"}),s.jsx("span",{style:{flex:1},children:"Player"}),s.jsx("span",{style:{width:"60px",textAlign:"right"},children:"Score"}),s.jsx("span",{style:{width:"50px",textAlign:"right"},children:"K/D"})]}),d.finalScores.map((l,p)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px",background:l.id===n.id?"rgba(52, 152, 219, 0.2)":"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[s.jsx("span",{style:{width:"30px",fontSize:"16px"},children:p===0?"ü•á":p===1?"ü•à":p===2?"ü•â":`${p+1}.`}),s.jsx("span",{style:{flex:1,fontWeight:l.id===n.id?"bold":"normal"},children:l.name}),s.jsx("span",{style:{width:"60px",textAlign:"right",fontWeight:"bold"},children:l.score}),s.jsxs("span",{style:{width:"50px",textAlign:"right",opacity:.7},children:[l.kills,"/",l.deaths]})]},l.id))]}),s.jsx("button",{onClick:()=>P(!g),style:{background:"transparent",border:"none",color:"#3498db",cursor:"pointer",marginBottom:"15px",width:"100%"},children:g?"‚ñº Hide Details":"‚ñ∂ Show Detailed Stats"}),g&&s.jsx("div",{style:{background:"rgba(0,0,0,0.3)",padding:"15px",borderRadius:"8px",marginBottom:"20px",fontSize:"13px"},children:d.finalScores.slice(0,5).map(l=>s.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:l.name}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"5px",opacity:.8},children:[s.jsxs("div",{children:["üéØ Influence: ",l.influence]}),s.jsxs("div",{children:["‚öîÔ∏è Damage: ",l.damageDealt]}),s.jsxs("div",{children:["üè∞ Nexuses: ",l.nexusesCaptured]})]})]},l.id))}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("button",{className:"btn",onClick:D,style:{flex:1,background:"linear-gradient(135deg, #27ae60, #2ecc71)"},children:"üîÑ Play Again"}),s.jsx("button",{className:"btn btn-secondary",onClick:N,style:{flex:1},children:"üè† Lobby"})]})]})})]})};function ye(){return s.jsxs(te,{children:[s.jsx($,{path:"/",element:s.jsx(de,{})}),s.jsx($,{path:"/game/:roomId",element:s.jsx(pe,{})})]})}z.createRoot(document.getElementById("root")).render(s.jsx(se.StrictMode,{children:s.jsx(ae,{children:s.jsx(ye,{})})}));
//# sourceMappingURL=index-ckoa4h8O.js.map
